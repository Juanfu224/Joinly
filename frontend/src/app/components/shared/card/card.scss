@use '../../../../styles/01-tools/mixins' as *;

// ==========================================================================
// COMPONENTE: CARD
// ==========================================================================
// Tarjetas reutilizables con múltiples variantes con Container Queries
// Variantes: feature, action, info, list
// Container Queries: feature y list (variantes complejas)
// Soporte: Chrome 105+, Firefox 110+, Safari 16+ (2022-2023)

:host {
  display: block;
  container-type: inline-size;
  container-name: card;
}

.c-card {
  display: flex;
  block-size: 100%;
  background-color: var(--bg-secondary);
  border-radius: var(--radio-grande);
  padding: var(--espaciado-4);
  box-shadow: var(--sombra-1);
  border: 1px solid var(--border-color);

  // Transición suave para cambio de tema
  transition: background-color var(--duracion-base) var(--transicion-estandar),
    box-shadow var(--duracion-base) var(--transicion-estandar),
    transform var(--duracion-base) var(--transicion-estandar),
    border-color var(--duracion-base) var(--transicion-estandar);

  // ==========================================================================
  // ELEMENTOS BASE (aplicables a todas las variantes)
  // ==========================================================================

  &__icon {
    flex-shrink: 0;
  }

  &__contenido {
    display: flex;
    flex-direction: column;
  }

  &__titulo {
    font-weight: var(--peso-fuente-semi-negrita);
    color: var(--color-texto-fuerte);
    line-height: var(--altura-linea-compacta);
  }

  &__descripcion,
  &__valor,
  &__metadata {
    color: var(--color-texto-base);
    line-height: var(--altura-linea-normal);
  }

  // ==========================================================================
  // ESTADO: HOVER
  // ==========================================================================

  &:not(&--no-hover):not(&--list):hover {
    box-shadow: var(--sombra-3);
    transform: translateY(-2px);
    cursor: pointer;
  }

  // ==========================================================================
  // MODIFICADOR: Sin hover
  // ==========================================================================

  &--no-hover {
    cursor: default;
  }

  // ==========================================================================
  // MODIFICADOR: Fondo gris claro (para tarjetas feature de ventajas)
  // ==========================================================================

  &--fondo-gris {
    background-color: var(--bg-primary);
  }

  // ==========================================================================
  // VARIANTE: FEATURE (con Container Queries)
  // ==========================================================================
  // Adaptaciones basadas en ancho del contenedor, no del viewport

  &--feature {
    flex-direction: column;
    // Combinación de Sombra 1 + Sombra 3 según diseño de Figma
    box-shadow: var(--sombra-1), var(--sombra-3);

    // Base: Mobile pequeño (< 18.75rem / 300px)
    gap: var(--espaciado-2);
    padding: var(--espaciado-3);

    .c-card__contenido {
      gap: var(--espaciado-2);
    }

    .c-card__titulo {
      font-size: var(--tamano-texto-grande);
      line-height: var(--altura-linea-compacta);
    }

    .c-card__descripcion {
      font-size: var(--tamano-texto-regular);
      line-height: var(--altura-linea-normal);
    }

    // Contenedor mediano (≥ 18.75rem / 300px)
    @container card (min-width: 18.75rem) {
      gap: var(--espaciado-3);
      padding: var(--espaciado-4);

      .c-card__titulo {
        font-size: var(--tamano-h4);
        line-height: var(--altura-linea-h4);
      }

      .c-card__descripcion {
        font-size: var(--tamano-texto-grande);
        line-height: var(--altura-linea-body-large);
      }
    }

    // Contenedor amplio (≥ 25rem / 400px)
    @container card (min-width: 25rem) {
      gap: var(--espaciado-4);
      padding: var(--espaciado-5);
    }

    .c-card__valor,
    .c-card__metadata,
    .c-card__badge,
    .c-card__accion {
      display: none;
    }
  }

  // ==========================================================================
  // VARIANTE: ACTION e INFO (comparten estilos base)
  // ==========================================================================

  &--action,
  &--info {
    flex-direction: row;
    align-items: center;
    gap: var(--espaciado-3);
    padding: var(--espaciado-3) var(--espaciado-4);

    .c-card__contenido {
      gap: var(--espaciado-1);
      flex: 1;
    }

    .c-card__titulo {
      font-size: var(--tamano-h4);
      font-weight: var(--peso-fuente-semi-negrita);
      line-height: var(--altura-linea-h4);
    }

    .c-card__badge,
    .c-card__accion {
      display: none;
    }
  }

  &--action {
    // Sombra más pronunciada para tarjetas de acción
    box-shadow: var(--sombra-1), var(--sombra-3);

    .c-card__descripcion {
      font-size: var(--tamano-texto-grande);
      line-height: var(--altura-linea-body-large);
    }

    .c-card__valor,
    .c-card__metadata {
      display: none;
    }

    &:not(.c-card--no-hover):hover {
      box-shadow: var(--sombra-4);
    }
  }

  &--info {
    .c-card__valor {
      font-size: var(--tamano-texto-pequeno);
    }

    .c-card__descripcion,
    .c-card__metadata {
      display: none;
    }
  }

  // ==========================================================================
  // VARIANTE: LIST (con Container Queries)
  // ==========================================================================
  // Adaptación de layout vertical a horizontal según contenedor

  &--list {
    gap: var(--espaciado-3);

    // Base: Mobile - layout vertical apilado
    flex-direction: column;
    align-items: flex-start;

    .c-card__contenido {
      gap: var(--espaciado-1);
      flex: 1;
      width: 100%;
    }

    .c-card__titulo {
      font-size: var(--tamano-texto-grande);
    }

    .c-card__metadata {
      font-size: var(--tamano-texto-pequeno);
    }

    .c-card__badge {
      display: flex;
      align-items: center;
      gap: var(--espaciado-1);
      font-size: var(--tamano-texto-pequeno);
      font-weight: var(--peso-fuente-medio);
    }

    .c-card__accion {
      flex-shrink: 0;
      width: 100%;
    }

    // Contenedor amplio (≥ 37.5rem / 600px) - layout horizontal
    @container card (min-width: 37.5rem) {
      flex-direction: row;
      align-items: center;

      .c-card__accion {
        width: auto;
      }
    }

    .c-card__icon,
    .c-card__descripcion,
    .c-card__valor {
      display: none;
    }
  }
}
