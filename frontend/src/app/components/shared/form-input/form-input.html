<div class="c-form-input__wrapper">
  <label class="c-form-input__label" [attr.for]="computedId()">
    {{ label() }}
    @if (required()) {
      <span class="c-form-input__required" aria-hidden="true">*</span>
    }
  </label>

  <input
    #inputEl
    class="c-form-input__field"
    [id]="computedId()"
    [type]="type()"
    [name]="name()"
    [placeholder]="placeholder()"
    [autocomplete]="autocomplete()"
    [value]="value()"
    [disabled]="disabled()"
    [attr.aria-required]="required()"
    [attr.aria-invalid]="errorMessage() ? true : null"
    [attr.aria-describedby]="ariaDescribedBy()"
    (input)="onInput($event)"
    (blur)="onBlur()"
  />
</div>

@if (pending()) {
  <span class="c-form-input__pending" role="status">
    <svg class="c-form-input__spinner" viewBox="0 0 24 24" aria-hidden="true">
      <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="3" fill="none" opacity="0.25"/>
      <path d="M12 2 A10 10 0 0 1 22 12" stroke="currentColor" stroke-width="3" fill="none" stroke-linecap="round"/>
    </svg>
    {{ pendingMessage() }}
  </span>
}
@else if (errorMessage()) {
  <span
    [id]="errorId()"
    class="c-form-input__error"
    role="alert"
  >
    {{ errorMessage() }}
  </span>
}
@else if (helpText()) {
  <span [id]="helpTextId()" class="c-form-input__help">
    {{ helpText() }}
  </span>
}
