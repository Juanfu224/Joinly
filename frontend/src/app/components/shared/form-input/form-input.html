<div class="c-form-input__wrapper">
  <label class="c-form-input__label" [attr.for]="computedId()">
    {{ label() }}
    @if (required()) {
      <span class="c-form-input__required" aria-hidden="true">*</span>
    }
  </label>

  <input
    #inputEl
    class="c-form-input__field"
    [id]="computedId()"
    [type]="type()"
    [name]="name()"
    [placeholder]="placeholder()"
    [autocomplete]="autocomplete()"
    [value]="value()"
    [disabled]="disabled()"
    [attr.aria-required]="required()"
    [attr.aria-invalid]="errorMessage() ? true : null"
    [attr.aria-describedby]="ariaDescribedBy()"
    (input)="onInput($event)"
    (blur)="onBlur()"
  />
</div>

@if (pending()) {
  <span class="c-form-input__pending" role="status">
    <svg class="c-form-input__spinner" viewBox="0 0 24 24" aria-hidden="true">
      <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="3" fill="none" opacity="0.25"/>
      <path d="M12 2 A10 10 0 0 1 22 12" stroke="currentColor" stroke-width="3" fill="none" stroke-linecap="round"/>
    </svg>
    {{ pendingMessage() }}
  </span>
}
@else if (errorMessage()) {
  <span
    [id]="errorId()"
    class="c-form-input__error"
    role="alert"
  >
    <svg class="c-form-input__icon" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
      <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.28 7.22a.75.75 0 00-1.06 1.06L8.94 10l-1.72 1.72a.75.75 0 101.06 1.06L10 11.06l1.72 1.72a.75.75 0 101.06-1.06L11.06 10l1.72-1.72a.75.75 0 00-1.06-1.06L10 8.94 8.28 7.22z" clip-rule="evenodd" />
    </svg>
    {{ errorMessage() }}
  </span>
}
@else if (showSuccess() && value()) {
  <span class="c-form-input__success" role="status">
    <svg class="c-form-input__icon" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
      <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z" clip-rule="evenodd" />
    </svg>
    {{ successMessage() }}
  </span>
}
@else if (helpText()) {
  <span [id]="helpTextId()" class="c-form-input__help">
    {{ helpText() }}
  </span>
}
