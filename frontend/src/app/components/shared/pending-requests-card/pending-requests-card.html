<article class="c-pending-requests" aria-labelledby="pending-requests-title">
  <header class="c-pending-requests__header">
    <div class="c-pending-requests__header-content">
      <app-icon name="users" size="md" />
      <h2 id="pending-requests-title" class="c-pending-requests__title">Solicitudes pendientes</h2>
      @if (count() > 0) {
        <span class="c-pending-requests__badge">{{ count() }}</span>
      }
    </div>
  </header>

  <div class="c-pending-requests__content">
    @if (hasSolicitudes()) {
      <ul class="c-pending-requests__list" role="list">
        @for (solicitud of solicitudes(); track solicitud.id) {
          <li class="c-pending-requests__item">
            <article class="c-pending-requests__card">
              <div class="c-pending-requests__user">
                <app-avatar
                  [src]="solicitud.solicitante.avatar || ''"
                  [name]="solicitud.solicitante.nombreCompleto"
                  size="md"
                  aria-hidden="true"
                />
                <div class="c-pending-requests__user-info">
                  <h3 class="c-pending-requests__user-name">
                    {{ solicitud.solicitante.nombreCompleto }}
                  </h3>
                  <p class="c-pending-requests__user-email">{{ solicitud.solicitante.email }}</p>
                  @if (solicitud.mensaje) {
                    <p class="c-pending-requests__message">{{ solicitud.mensaje }}</p>
                  }
                </div>
              </div>
              <div class="c-pending-requests__actions">
                <app-button
                  variant="secondary"
                  size="md"
                  (click)="handleReject(solicitud)"
                  [attr.aria-label]="
                    'Rechazar solicitud de ' + solicitud.solicitante.nombreCompleto
                  "
                >
                  Rechazar
                </app-button>
                <app-button
                  variant="primary"
                  size="md"
                  (click)="handleAccept(solicitud)"
                  [attr.aria-label]="'Aceptar solicitud de ' + solicitud.solicitante.nombreCompleto"
                >
                  Aceptar
                </app-button>
              </div>
            </article>
          </li>
        }
      </ul>
    } @else {
      <div class="c-pending-requests__empty">
        <p class="c-pending-requests__empty-text">No hay solicitudes pendientes</p>
      </div>
    }
  </div>
</article>
